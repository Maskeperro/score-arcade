<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Score Arcade</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .game-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            display: block;
            margin: 10px auto;
            border-radius: 10px;
            box-shadow: 0 0 10px limegreen;
        }
    </style>
</head>
<body>
    <div class="arcade-container">
        <h1>üèÜ Top Score Arcade üèÜ</h1>
        <div id="score-sections"></div>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch("scores.json")
                .then(response => response.json())
                .then(data => {
                    const scoreSections = document.getElementById("score-sections");
                    let generalScores = {};
                    
                    const gameNames = {
                        "game1": "Pac-Man",
                        "game2": "Space Invaders",
                        "game3": "Donkey Kong",
                        "game4": "Galaga",
                        "game5": "Street Fighter II",
                        "general": "Ranking General"
                    };
                    
                    const gameImages = {
                        "game1": "pacman.jpg",
                        "game2": "space_invaders.jpg",
                        "game3": "donkey_kong.jpg",
                        "game4": "galaga.jpg",
                        "game5": "street_fighter.jpg",
                        "general": "general.jpg"
                    };
                    
                    Object.keys(data.scores).forEach(game => {
                        if (game !== "general") {
                            data.scores[game].forEach(player => {
                                if (!generalScores[player.initials]) {
                                    generalScores[player.initials] = {
                                        name: player.name,
                                        initials: player.initials,
                                        score: 0
                                    };
                                }
                                generalScores[player.initials].score += player.score;
                            });
                        }
                    });
                    
                    data.scores.general = Object.values(generalScores).sort((a, b) => b.score - a.score);
                    
                    Object.keys(data.scores).forEach(game => {
                        let section = document.createElement("div");
                        section.classList.add("game-section");
                        section.innerHTML = `
                            <h2>${gameNames[game]}</h2>
                            <img src="images/${gameImages[game]}" alt="${gameNames[game]}" class="game-image">
                        `;
                        
                        let table = document.createElement("table");
                        table.innerHTML = `
                            <thead>
                                <tr>
                                    <th>Puesto</th>
                                    <th>Nombre</th>
                                    <th>Iniciales</th>
                                    <th>Puntaje</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data.scores[game].map((entry, index) => `
                                    <tr>
                                        <td>${index + 1}</td>
                                        <td>${entry.name}</td>
                                        <td>${entry.initials}</td>
                                        <td>${entry.score}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        `;
                        section.appendChild(table);
                        scoreSections.appendChild(section);
                    });
                })
                .catch(error => console.error("Error cargando los puntajes:", error));
        });
    </script>
</body>
</html>
